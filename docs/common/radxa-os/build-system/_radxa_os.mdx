import { Image } from "@site/src/utils/docs";

## 使用前提

我们需要提前将 Visual Studio Code 和 Docker 环境搭建好，然后使用 Dev Container 来运行 RadxaOS SDK（rsdk）的编译环境。

:::info 参考教程

可以按照下方教程完成 RadxaOS SDK（rsdk）开发的环境搭建。

- [环境搭建](./install-env)
  :::

## 下载 rsdk 源码

使用 `git clone` 命令克隆 RadxaOS SDK（rsdk）源码。

<NewCodeBlock tip="Linux-Host$" type="host">

```
git clone --recurse-submodules <git_repo_url>
```

</NewCodeBlock>

其中 `<git_repo_url>` 需要替换成：{props.git_url}

## 启动开发环境

使用 Visual Studio Code 打开 Radxa OS SDK（rsdk）源码目录：一般 `Dev Container` 拓展会自动识别文件夹下的配置文件，会提示你是否重新打开容器开发环境。

:::tip
首次启动开发环境时，Dev Containers 会自动下载并安装依赖，需要耐心等待一段时间。
:::

①：点击左下角的 `Remote` 选项

②：选择 `Reopen in Container` 选项

<div style={{ textAlign: "center" }}>
  <img
    src="/img/common/radxa-os/low-level-dev/vscode-dev-container-reopen.webp"
    style={{ width: "100%", maxWidth: "1200px" }}
  />
</div>

## 编译 Radxa OS

启动开发环境后，使用 `rsdk` 命令运行 TUI 界面。

<NewCodeBlock tip="Linux-Host$" type="host">

```
rsdk
```

</NewCodeBlock>

```
┌─────────────────┤ RSDK ├──────────────────┐
│ Please select a task:                     │
│                                           │
│            Build system image             │
│            =========                      │
│            About                          │
│                                           │
│         <Ok>             <Cancel>         │
│                                           │
└───────────────────────────────────────────┘
```

选择 `Build system image` 选项，可以进一步选择需要构建的主板型号：`<sbc_model>` 是你需要构建的主板型号。

```
┌─────────────────┤ RSDK ├──────────────────┐
│ Please select a product:                  │
│                                           │
│  (*) radxa-<sbc_model>                    │
│                                           │
│         <Ok>             <Cancel>         │
│                                           │
└───────────────────────────────────────────┘
```

选择 `yes` 后开始构建 Radxa OS，rsdk 会自动完成镜像编译：`<sbc_model>` 是你需要构建的主板型号。

```
┌─────────────────┤ RSDK ├───────────────────────┐
│                                                │
│ Are you sure to build for 'radxa-<sbc_model>'? │
│                                                │
│                                                │
│          <Yes>             <No>                │
│                                                │
└────────────────────────────────────────────────┘
```

编译完成后，会在 `out` 目录下生成主板型号与系统版本对应的文件夹，该文件夹下会生成名称为 `output.img` 的 Radxa OS 镜像。
