主要介绍如何连接 WiFi 网络、设置自发热点、测试网络带宽。

## 连接 WiFi 网络

<Tabs queryString="web-mode">

<TabItem value="图形界面">

① ： 点击网络图标

② ： 点击需要连接的 WiFi 名称后面的 `Connect` 按钮

③ ： 输入 WiFi 密码并根据后续的提示进行连接

<div style={{ textAlign: "center" }}>
  <img
    src="/img/common/tools/radxa-os/wifi-connect-01.webp"
    style={{ width: "100%", maxWidth: "1200px" }}
  />
</div>

连接成功后，选择 `Details` 选项可以看到网络连接的详细信息，如 IP 地址、子网掩码、网关地址等。

其中 `192.168.31.53` 就是路由器分配的 IP 地址。

<div style={{ textAlign: "center" }}>
  <img
    src="/img/common/tools/radxa-os/wifi-connect-02.webp"
    style={{ width: "100%", maxWidth: "1200px" }}
  />
</div>

</TabItem>

<TabItem value="命令行模式">

1. 开启 WiFi 功能

<NewCodeBlock tip="radxa@device$" type="device">

```
sudo nmcli radio wifi on
```

</NewCodeBlock>

2. 搜索 WiFi 网络

<NewCodeBlock tip="radxa@device$" type="device">

```
sudo nmcli device wifi list
```

</NewCodeBlock>

3. 连接 WiFi 网络

<NewCodeBlock tip="radxa@device$" type="device">

```
sudo nmcli device wifi connect <SSID> password <PASSWORD>

# 示例

sudo nmcli device wifi connect wifi_demo password 12345678
```

</NewCodeBlock>

4. 查看网络连接的详细信息

<NewCodeBlock tip="radxa@device$" type="device">

```
ip a
```

</NewCodeBlock>

终端会输出类似如下信息：其中 `192.168.31.76` 就是路由器分配的 IP 地址。

```
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
inet 127.0.0.1/8 scope host lo
valid_lft forever preferred_lft forever
inet6 ::1/128 scope host noprefixroute
valid_lft forever preferred_lft forever
2: end0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc mq state DOWN group default qlen 1000
link/ether 46:d3:58:1c:a6:7b brd ff:ff:ff:ff:ff:ff
3: wlan0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000
link/ether 00:9c:17:48:3a:b7 brd ff:ff:ff:ff:ff:ff
inet 192.168.31.76/24 brd 192.168.31.255 scope global dynamic noprefixroute wlan0
valid_lft 3589sec preferred_lft 3589sec
inet6 fdaa:0:0:30::20e/128 scope global dynamic noprefixroute
valid_lft 3589sec preferred_lft 3589sec
inet6 240e:3b7:3247:bbe2::20e/128 scope global dynamic noprefixroute
valid_lft 3589sec preferred_lft 3589sec
inet6 240e:3b7:3247:bbe2:ade9:33e1:9578:c650/64 scope global dynamic noprefixroute
valid_lft 208272sec preferred_lft 121872sec
inet6 fdaa::30:7a49:395c:bb65:e4da/64 scope global noprefixroute
valid_lft forever preferred_lft forever
inet6 fe80::7bd8:903:e5d7:6471/64 scope link noprefixroute
valid_lft forever preferred_lft forever
```

:::tip
Nmcli 是 Network Manager Command Line Interface 的简称，是 Linux 下管理网络的命令行工具。

拓展命令：

- `sudo nmcli radio wifi off`：关闭 WiFi 功能。
- `sudo nmcli connection delete <SSID>` ：删除指定的 WiFi 网络。
  :::

</TabItem>

</Tabs>

## 设置 WiFi 热点

### 设置 WiFi 热点

<NewCodeBlock tip="radxa@device$" type="device">

```
sudo nmcli device wifi hotspot ifname <ifname> con-name <name> ssid <SSID> password <password>

# 示例

sudo nmcli device wifi hotspot ifname wlan0 con-name My-Hotspot ssid My-Hotspot password 12345678
```

</NewCodeBlock>

参数说明：用名为 wlan0 的无线网卡创建一个名为 My-Hotspot、密码为 12345678 的WiFi热点，并将该连接保存为 My-Hotspot。

- `ifname`：指定用于创建热点的无线网卡接口名，可以使用 `ip a` 命令查看无线网卡接口名。
- `con-name`：指定热点连接名称，后续可以通过这个名字管理（开启、关闭、删除该热点）。
- `ssid`：指定热点的名称，也就是其他设备搜索到的无线网络名称。
- `password`：指定热点的密码。

设置成功后，终端会输出类似如下信息：

```
Device 'wlan0' successfully activated with 'd73e5af7-a49c-4608-bdab-bd28a36bdbef'.
Hint: "nmcli dev wifi show-password" shows the Wi-Fi name and password.
```

### 关闭 WiFi 热点

<NewCodeBlock tip="radxa@device$" type="device">

```
sudo nmcli connection down My-Hotspot
```

</NewCodeBlock>

### 开启 WiFi 热点

<NewCodeBlock tip="radxa@device$" type="device">

```
sudo nmcli connection up My-Hotspot
```

</NewCodeBlock>

### 删除 WiFi 热点

<NewCodeBlock tip="radxa@device$" type="device">

```
sudo nmcli connection delete My-Hotspot
```

</NewCodeBlock>

## 测试网络带宽

使用 `iperf` 工具来测试网络带宽（吞吐量）性能，建议多次测试取平均值。

### 测试前提

- 硬件设备

您需要两台设备，其中一台设备作为服务端，另一台设备作为客户端。

服务端：PC、服务器等设备。

客户端：瑞莎主板。

- 同一局域网

服务端和客户端需要处于同一局域网，彼此可以 ping 通。

### 安装 iperf

服务端和客户端都需要安装 `iperf`。

<NewCodeBlock tip="radxa@device$ & Linux$" type="device">

```
sudo apt update
sudo apt install iperf
```

</NewCodeBlock>

### 测试步骤

#### 服务端

打开命令行终端，输入以下命令启动服务端：

<NewCodeBlock tip="Linux" type="host">

```
iperf -s
```

</NewCodeBlock>

成功启动后，终端会输出类似如下信息：

```
---

## Server listening on 5201 (test #1)
```

:::tip
若系统提示 `iperf3: error - unable to start listener for connections: Address already in use`，说明 iperf3 进程占用了 5201 端口。

解决办法：

1. 查看 iperf3 的进程

<NewCodeBlock tip="Linux$" type="host">

```
ps -ef | grep iperf3
```

</NewCodeBlock>

2. 终止 iperf3 进程：将 `<PID>` 替换为 iperf3 进程的 PID。

<NewCodeBlock tip="Linux$" type="host">

```
sudo kill <PID>
```

</NewCodeBlock>
:::

#### 客户端

1. 上传测试

打开命令行终端，输入以下命令测试客户端上传网络带宽：将 `<server_ip>` 替换为实际的服务端 IP 地址（可以通过 `ip a` 命令查看）。

<NewCodeBlock tip="radxa@device$" type="device">

```
iperf -c <server_ip> -t <time>

# 示例

iperf -c 192.168.2.186 -t 60
```

</NewCodeBlock>

参数说明：

- `<server_ip>`：服务端 IP 地址。
- `<time>`：测试时间，单位为秒。

2. 下载测试

打开命令行终端，输入以下命令测试客户端下载网络带宽：将 `<server_ip>` 替换为实际的服务端 IP 地址（可以通过 `ip a` 命令查看）。

<NewCodeBlock tip="radxa@device$" type="device">

```
iperf -c <server_ip> -t <time> -R

# 示例

iperf -c 192.168.2.186 -t 60 -R
```

</NewCodeBlock>

参数说明：

- `<server_ip>`：服务端 IP 地址。
- `<time>`：测试时间，单位为秒。
- `-R`：反向测试，即客户端作为服务端，服务端作为客户端。
